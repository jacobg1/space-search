import{d as m,i as _,c as n,a,b as o,w as F,e as P,v as V,F as $,o as i,n as f,r as N,f as v,g as A,h,j as u,k as E,l as B,m as M,t as p}from"./index-Cd1fud04.js";const j=m({name:"SearchForm",props:{makeSearch:Function},setup(){return{getSpaceSearch:_("getSpaceSearch")}},data(){return{searchTerm:"",resultLength:null,noTerm:!1,loading:!1}},methods:{async getSearch(e){if(this.noTerm=!1,e&&this.getSpaceSearch&&this.makeSearch){this.loading=!0;const t=await this.getSpaceSearch(e);this.loading=!1,this.resultLength=t?.items?.length||0,this.makeSearch(t)}else this.noTerm=!0}}}),k=(e,t)=>{const r=e.__vccOpts||e;for(const[c,l]of t)r[c]=l;return r},G={key:0,class:"form-error"},K={key:1,class:"form-error"},R={class:"search-form"},X=["disabled"];function z(e,t,r,c,l,g){return i(),n($,null,[e.noTerm&&!e.searchTerm?(i(),n("p",G,"Please enter search term in input field")):a("",!0),!e.noTerm&&e.resultLength===0?(i(),n("p",K,"No results please try again")):a("",!0),o("div",R,[o("form",{onSubmit:t[2]||(t[2]=F(()=>{},["prevent"]))},[P(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=d=>e.searchTerm=d),placeholder:"Enter search"},null,512),[[V,e.searchTerm]]),o("button",{disabled:e.loading,class:"shutter-button no-active",type:"submit",onClick:t[1]||(t[1]=d=>e.getSearch(e.searchTerm))}," Go! ",8,X)],32)])],64)}const D=k(j,[["render",z]]),O=m({name:"SwitchView",props:{makeSwitch:Function,listActive:Boolean}}),U={class:"switch-view"};function W(e,t,r,c,l,g){return i(),n("div",U,[o("button",{class:f([{active:e.listActive},"shutter-button new-background"]),onClick:t[0]||(t[0]=d=>e.makeSwitch&&e.makeSwitch(!0))}," List ",2),o("button",{class:f([{active:!e.listActive},"shutter-button"]),onClick:t[1]||(t[1]=d=>e.makeSwitch&&e.makeSwitch(!1))}," Grid ",2)])}const q=k(O,[["render",W]]);var S=(e=>(e.PREV="prev",e.NEXT="next",e))(S||{});function y(e,t){return t?.find(r=>r.rel===e)||null}const H=m({name:"SwitchPage",props:{makeSearch:Function,paginationLinks:Array},setup(e){const t=N(!1),r=_("getSpaceSearch"),c=v(()=>y(S.PREV,e.paginationLinks)),l=v(()=>y(S.NEXT,e.paginationLinks));return{getSpaceSearch:r,loading:t,prevLink:c,nextLink:l}},methods:{async getSearch(e){if(e&&this.getSpaceSearch&&this.makeSearch){this.loading=!0;const t=await this.getSpaceSearch(e.searchTerm,e.page);this.loading=!1,window.scrollTo(0,0),this.makeSearch(t)}}}}),I={key:0,class:"switch-page-container"},J={class:"switch-page"},Q=["disabled"],Y=["disabled"];function Z(e,t,r,c,l,g){return e.paginationLinks?.length?(i(),n("div",I,[o("div",J,[o("div",null,[e.prevLink?(i(),n("button",{key:0,onClick:t[0]||(t[0]=()=>e.getSearch(e.prevLink)),disabled:e.loading,class:"shutter-button new-background"}," Prev ",8,Q)):a("",!0)]),o("div",null,[e.nextLink?(i(),n("button",{key:0,onClick:t[1]||(t[1]=()=>e.getSearch(e.nextLink)),disabled:e.loading,class:"shutter-button"}," Next ",8,Y)):a("",!0)])])])):a("",!0)}const x=k(H,[["render",Z]]),ee=m({name:"SearchPage",components:{SearchForm:D,SwitchView:q,SwitchPage:x,MasonryWall:A},data(){return{results:[],paginationLinks:[],keywords:null,isList:!1}},methods:{handleSearch(e){this.results=e.items,this.paginationLinks=e.paginationLinks},handleSwitch(e){this.isList=e}}}),te={class:"search"},se={key:0,class:"gallery"},ne={class:"gallery-item"},ie={key:0},ae={key:1,class:"grid-lightbox-holder"},oe={key:2,class:"description"},re={key:3,class:"keyword-holder"},ce={class:"grid-keywords"},le={key:1},de={key:0,class:"list-container"},he={key:0},pe={key:1,class:"description"},ue={key:2,class:"keyword-holder"},me={key:1,class:"list-image-container"},ke={height:"100%",width:"100%"};function ge(e,t,r,c,l,g){const d=u("SearchForm"),L=u("SwitchView"),w=u("silent-box"),b=u("masonry-wall"),C=u("SwitchPage");return i(),n("div",te,[t[2]||(t[2]=o("h2",{class:"title"},"Space Search",-1)),h(d,{makeSearch:e.handleSearch},null,8,["makeSearch"]),h(L,{listActive:e.isList,makeSwitch:e.handleSwitch},null,8,["listActive","makeSwitch"]),e.isList?a("",!0):(i(),n("div",se,[h(b,{items:e.results,"max-columns":6,"column-width":290,gap:20},E({_:2},[e.results?{name:"default",fn:B(({item:s})=>[o("div",ne,[s.title?(i(),n("h2",ie,p(s.title),1)):a("",!0),s.href?(i(),n("div",ae,[h(w,{image:{src:s.href,description:s.title?.toLowerCase(),thumbnail:s.href,alt:s.title}},null,8,["image"])])):a("",!0),s.description_508&&s.description_508!==s.title?(i(),n("p",oe,p(s.description_508.toLowerCase()),1)):a("",!0),s.keywords?(i(),n("div",re,[t[0]||(t[0]=o("p",{class:"keyword-title"},"Keywords:",-1)),o("p",ce,p(s.keywords),1)])):a("",!0)])]),key:"0"}:void 0]),1032,["items"])])),e.isList?(i(),n("div",le,[(i(!0),n($,null,M(e.results,(s,T)=>(i(),n("div",{id:"list",key:T},[s?(i(),n("div",de,[s.title?(i(),n("h2",he,p(s.title),1)):a("",!0),s.description_508&&s.description_508!==s.title?(i(),n("p",pe,p(s.description_508.toLowerCase()),1)):a("",!0),s.keywords?(i(),n("div",ue,[t[1]||(t[1]=o("p",{class:"keyword-title"},"Keywords:",-1)),o("p",null,p(s.keywords),1)])):a("",!0)])):a("",!0),s.href?(i(),n("div",me,[o("div",ke,[h(w,{image:{src:s.href,description:s.title?.toLowerCase(),thumbnail:s.href,alt:s.title}},null,8,["image"])])])):a("",!0)]))),128))])):a("",!0),h(C,{makeSearch:e.handleSearch,paginationLinks:e.paginationLinks},null,8,["makeSearch","paginationLinks"])])}const we=k(ee,[["render",ge]]);export{we as default};
