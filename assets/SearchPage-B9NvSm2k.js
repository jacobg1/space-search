import{d as m,i as y,c as n,a as o,b as a,w as P,e as V,v as F,F as $,o as i,n as _,r as N,f,R as A,g as d,h as u,j as E,k as B,l as M,t as p}from"./index-Cl_-xO1j.js";const R=m({name:"SearchForm",props:{makeSearch:Function},setup(){return{getSpaceSearch:y("getSpaceSearch")}},data(){return{searchTerm:"",resultLength:null,noTerm:!1,loading:!1}},methods:{async getSearch(e){if(this.noTerm=!1,e&&this.getSpaceSearch&&this.makeSearch){this.loading=!0;const t=await this.getSpaceSearch(e);this.loading=!1,this.resultLength=t?.items?.length||0,this.makeSearch(t)}else this.noTerm=!0}}}),k=(e,t)=>{const r=e.__vccOpts||e;for(const[c,l]of t)r[c]=l;return r},j={key:0,class:"form-error"},G={key:1,class:"form-error"},K={class:"search-form"},X=["disabled"];function z(e,t,r,c,l,g){return i(),n($,null,[e.noTerm&&!e.searchTerm?(i(),n("p",j,"Please enter search term in input field")):o("",!0),!e.noTerm&&e.resultLength===0?(i(),n("p",G,"No results please try again")):o("",!0),a("div",K,[a("form",{onSubmit:t[2]||(t[2]=P(()=>{},["prevent"]))},[V(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=h=>e.searchTerm=h),placeholder:"Enter search"},null,512),[[F,e.searchTerm]]),a("button",{disabled:e.loading,class:"shutter-button no-active",type:"submit",onClick:t[1]||(t[1]=h=>e.getSearch(e.searchTerm))}," Go! ",8,X)],32)])],64)}const D=k(R,[["render",z]]),O=m({name:"SwitchView",props:{makeSwitch:Function,listActive:Boolean}}),U={class:"switch-view"};function W(e,t,r,c,l,g){return i(),n("div",U,[a("button",{class:_([{active:e.listActive},"shutter-button new-background"]),onClick:t[0]||(t[0]=h=>e.makeSwitch&&e.makeSwitch(!0))}," List ",2),a("button",{class:_([{active:!e.listActive},"shutter-button"]),onClick:t[1]||(t[1]=h=>e.makeSwitch&&e.makeSwitch(!1))}," Grid ",2)])}const q=k(O,[["render",W]]);var S=(e=>(e.PREV="prev",e.NEXT="next",e))(S||{});function v(e,t){return t?.find(r=>r.rel===e)||null}const H=m({name:"SwitchPage",props:{makeSearch:Function,paginationLinks:Array},setup(e){const t=N(!1),r=y("getSpaceSearch"),c=f(()=>v(S.PREV,e.paginationLinks)),l=f(()=>v(S.NEXT,e.paginationLinks));return{getSpaceSearch:r,loading:t,prevLink:c,nextLink:l}},methods:{async getSearch(e){if(e&&this.getSpaceSearch&&this.makeSearch){this.loading=!0;const t=await this.getSpaceSearch(e.searchTerm,e.page);this.loading=!1,window.scrollTo(0,0),this.makeSearch(t)}}}}),I={key:0,class:"switch-page-container"},J={class:"switch-page"},Q=["disabled"],Y=["disabled"];function Z(e,t,r,c,l,g){return e.paginationLinks?.length?(i(),n("div",I,[a("div",J,[a("div",null,[e.prevLink?(i(),n("button",{key:0,onClick:t[0]||(t[0]=()=>e.getSearch(e.prevLink)),disabled:e.loading,class:"shutter-button new-background"}," Prev ",8,Q)):o("",!0)]),a("div",null,[e.nextLink?(i(),n("button",{key:0,onClick:t[1]||(t[1]=()=>e.getSearch(e.nextLink)),disabled:e.loading,class:"shutter-button"}," Next ",8,Y)):o("",!0)])])])):o("",!0)}const x=k(H,[["render",Z]]),ee=m({name:"SearchPage",components:{SearchForm:D,SwitchView:q,SwitchPage:x,MasonryWall:A},data(){return{results:[],paginationLinks:[],keywords:null,isList:!1}},methods:{handleSearch(e){this.results=e.items,this.paginationLinks=e.paginationLinks},handleSwitch(e){this.isList=e}}}),te={class:"search"},se=a("h2",{class:"title"},"Space Search",-1),ne={key:0,class:"gallery"},ie={class:"gallery-item"},oe={key:0},ae={key:1,class:"grid-lightbox-holder"},re={key:2,class:"description"},ce={key:3,class:"keyword-holder"},le=a("p",{class:"keyword-title"},"Keywords:",-1),he={class:"grid-keywords"},de={key:1},pe={key:0,class:"list-container"},ue={key:0},me={key:1,class:"description"},ke={key:2,class:"keyword-holder"},ge=a("p",{class:"keyword-title"},"Keywords:",-1),Se={key:1,class:"list-image-container"},we={height:"100%",width:"100%"};function _e(e,t,r,c,l,g){const h=u("SearchForm"),L=u("SwitchView"),w=u("silent-box"),b=u("masonry-wall"),C=u("SwitchPage");return i(),n("div",te,[se,d(h,{makeSearch:e.handleSearch},null,8,["makeSearch"]),d(L,{listActive:e.isList,makeSwitch:e.handleSwitch},null,8,["listActive","makeSwitch"]),e.isList?o("",!0):(i(),n("div",ne,[d(b,{items:e.results,"max-columns":6,"column-width":290,gap:20},E({_:2},[e.results?{name:"default",fn:B(({item:s})=>[a("div",ie,[s.title?(i(),n("h2",oe,p(s.title),1)):o("",!0),s.href?(i(),n("div",ae,[d(w,{image:{src:s.href,description:s.title?.toLowerCase(),thumbnail:s.href,alt:s.title}},null,8,["image"])])):o("",!0),s.description_508&&s.description_508!==s.title?(i(),n("p",re,p(s.description_508.toLowerCase()),1)):o("",!0),s.keywords?(i(),n("div",ce,[le,a("p",he,p(s.keywords),1)])):o("",!0)])]),key:"0"}:void 0]),1032,["items"])])),e.isList?(i(),n("div",de,[(i(!0),n($,null,M(e.results,(s,T)=>(i(),n("div",{id:"list",key:T},[s?(i(),n("div",pe,[s.title?(i(),n("h2",ue,p(s.title),1)):o("",!0),s.description_508&&s.description_508!==s.title?(i(),n("p",me,p(s.description_508.toLowerCase()),1)):o("",!0),s.keywords?(i(),n("div",ke,[ge,a("p",null,p(s.keywords),1)])):o("",!0)])):o("",!0),s.href?(i(),n("div",Se,[a("div",we,[d(w,{image:{src:s.href,description:s.title?.toLowerCase(),thumbnail:s.href,alt:s.title}},null,8,["image"])])])):o("",!0)]))),128))])):o("",!0),d(C,{makeSearch:e.handleSearch,paginationLinks:e.paginationLinks},null,8,["makeSearch","paginationLinks"])])}const ve=k(ee,[["render",_e]]);export{ve as default};
