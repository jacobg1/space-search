import{d as f,c as o,a,n as F,r as E,b as r,F as w,o as n,i as B,e as c,w as A,f as R,v as X,g as m,h,j as S,k as L,l as $,m as C,p as M,q as j,s as G,t as u}from"./index-B20qAwU0.js";const K=["disabled","type"],q={key:1,class:"loading-container"},v=f({__name:"ShutterButton",props:{active:{type:Boolean},loading:{type:Boolean},disabled:{type:Boolean},className:{},type:{},onClick:{type:Function}},setup(e){return(t,i)=>(n(),o(w,null,[t.loading?a("",!0):(n(),o("button",{key:0,class:F([{loading:t.loading,active:t.active||!1},["shutter-button",t.className]]),disabled:t.loading||t.disabled||!1,type:t.type||"button",onClick:i[0]||(i[0]=(...d)=>t.onClick&&t.onClick(...d))},[E(t.$slots,"default")],10,K)),t.loading?(n(),o("div",q,i[1]||(i[1]=[r("div",{class:"loading-spinner"},null,-1)]))):a("",!0)],64))}}),z=f({name:"SearchForm",props:{makeSearch:Function},components:{ShutterButton:v},setup(){return{getSpaceSearch:B("getSpaceSearch")}},data(){return{searchTerm:"",resultLength:null,noTerm:!1,loading:!1}},methods:{async getSearch(e){if(this.noTerm=!1,e&&this.getSpaceSearch&&this.makeSearch){this.loading=!0;const t=await this.getSpaceSearch(e);this.loading=!1,this.resultLength=t?.items?.length||0,this.makeSearch(t)}else this.noTerm=!0}}}),y=(e,t)=>{const i=e.__vccOpts||e;for(const[d,p]of t)i[d]=p;return i},D={key:0,class:"form-error"},O={key:1,class:"form-error"},U={class:"search-form"};function W(e,t,i,d,p,g){const l=h("ShutterButton");return n(),o(w,null,[e.noTerm&&!e.searchTerm?(n(),o("p",D," Please enter search term in input field ")):a("",!0),!e.noTerm&&e.resultLength===0?(n(),o("p",O," No results please try again ")):a("",!0),r("div",U,[r("form",{onSubmit:t[1]||(t[1]=A(()=>{},["prevent"]))},[R(r("input",{id:"form-input",type:"text",placeholder:"Enter search",autocomplete:"off","onUpdate:modelValue":t[0]||(t[0]=k=>e.searchTerm=k)},null,512),[[X,e.searchTerm]])],32),c(l,{className:"search-button",type:"submit",loading:e.loading,onClick:()=>e.getSearch(e.searchTerm)},{default:m(()=>t[2]||(t[2]=[S(" Go! ")])),_:1,__:[2]},8,["loading","onClick"])])],64)}const H=y(z,[["render",W]]),I=f({name:"SwitchView",props:{makeSwitch:Function,listActive:Boolean},components:{ShutterButton:v}}),J={class:"switch-view"};function Q(e,t,i,d,p,g){const l=h("ShutterButton");return n(),o("div",J,[c(l,{className:"secondary-button",active:e.listActive,onClick:()=>e.makeSwitch&&e.makeSwitch(!0)},{default:m(()=>t[0]||(t[0]=[S(" List ")])),_:1,__:[0]},8,["active","onClick"]),c(l,{active:!e.listActive,onClick:()=>e.makeSwitch&&e.makeSwitch(!1)},{default:m(()=>t[1]||(t[1]=[S(" Grid ")])),_:1,__:[1]},8,["active","onClick"])])}const Y=y(I,[["render",Q]]);var T=(e=>(e.PREV="prev",e.NEXT="next",e))(T||{});function b(e,t){return t?.find(i=>i.rel===e)||null}const Z=f({name:"SwitchPage",props:{makeSearch:Function,paginationLinks:Array},components:{ShutterButton:v},setup(e){const{NEXT:t,PREV:i}=T,d=L(!1),p=L(!1),g=B("getSpaceSearch"),l=$(()=>b(i,e.paginationLinks)),k=$(()=>b(t,e.paginationLinks));return{getSpaceSearch:g,nextLoading:d,prevLoading:p,prevLink:l,nextLink:k,NEXT:t,PREV:i}},methods:{async getSearch(e,t){if(e&&this.getSpaceSearch&&this.makeSearch){t===this.NEXT&&(this.nextLoading=!0),t===this.PREV&&(this.prevLoading=!0);const i=await this.getSpaceSearch(e.searchTerm,e.page);this.nextLoading=!1,this.prevLoading=!1,window.scrollTo(0,0),this.makeSearch(i)}}}}),x={key:0,class:"switch-page-container"},ee={class:"switch-page"};function te(e,t,i,d,p,g){const l=h("ShutterButton");return e.paginationLinks?.length?(n(),o("div",x,[r("div",ee,[r("div",null,[e.prevLink?(n(),C(l,{key:0,className:"secondary-button",loading:e.prevLoading,disabled:e.prevLoading||e.nextLoading,onClick:()=>e.getSearch(e.prevLink,e.PREV)},{default:m(()=>t[0]||(t[0]=[S(" Prev ")])),_:1,__:[0]},8,["loading","disabled","onClick"])):a("",!0)]),r("div",null,[e.nextLink?(n(),C(l,{key:0,loading:e.nextLoading,disabled:e.nextLoading||e.prevLoading,onClick:()=>e.getSearch(e.nextLink,e.NEXT)},{default:m(()=>t[1]||(t[1]=[S(" Next ")])),_:1,__:[1]},8,["loading","disabled","onClick"])):a("",!0)])])])):a("",!0)}const se=y(Z,[["render",te]]),ne=f({name:"SearchPage",components:{SearchForm:H,SwitchView:Y,SwitchPage:se,MasonryWall:M},data(){return{results:[],paginationLinks:[],keywords:null,isList:!1}},methods:{handleSearch(e){this.results=e.items,this.paginationLinks=e.paginationLinks},handleSwitch(e){this.isList=e}}}),oe={class:"search"},ie={key:0,class:"gallery"},ae={class:"gallery-item"},re={key:0},le={key:1,class:"grid-lightbox-holder"},de={key:2,class:"description"},ce={key:3,class:"keyword-holder"},he={class:"grid-keywords"},pe={key:1},ue={key:0,class:"list-container"},me={key:0},ge={key:1,class:"description"},ke={key:2,class:"keyword-holder"},Se={key:1,class:"list-image-container"},fe={height:"100%",width:"100%"};function ye(e,t,i,d,p,g){const l=h("SearchForm"),k=h("SwitchView"),_=h("silent-box"),N=h("masonry-wall"),V=h("SwitchPage");return n(),o("div",oe,[t[2]||(t[2]=r("h2",{class:"title"},"Space Search",-1)),c(l,{makeSearch:e.handleSearch},null,8,["makeSearch"]),c(k,{listActive:e.isList,makeSwitch:e.handleSwitch},null,8,["listActive","makeSwitch"]),e.isList?a("",!0):(n(),o("div",ie,[c(N,{items:e.results,"max-columns":6,"column-width":290,gap:20},j({_:2},[e.results?{name:"default",fn:m(({item:s})=>[r("div",ae,[s.title?(n(),o("h2",re,u(s.title),1)):a("",!0),s.href?(n(),o("div",le,[c(_,{image:{src:s.href,description:s.title?.toLowerCase(),thumbnail:s.href,alt:s.title}},null,8,["image"])])):a("",!0),s.description_508&&s.description_508!==s.title?(n(),o("p",de,u(s.description_508.toLowerCase()),1)):a("",!0),s.keywords?(n(),o("div",ce,[t[0]||(t[0]=r("p",{class:"keyword-title"},"Keywords:",-1)),r("p",he,u(s.keywords),1)])):a("",!0)])]),key:"0"}:void 0]),1032,["items"])])),e.isList?(n(),o("div",pe,[(n(!0),o(w,null,G(e.results,(s,P)=>(n(),o("div",{id:"list",key:P},[s?(n(),o("div",ue,[s.title?(n(),o("h2",me,u(s.title),1)):a("",!0),s.description_508&&s.description_508!==s.title?(n(),o("p",ge,u(s.description_508.toLowerCase()),1)):a("",!0),s.keywords?(n(),o("div",ke,[t[1]||(t[1]=r("p",{class:"keyword-title"},"Keywords:",-1)),r("p",null,u(s.keywords),1)])):a("",!0)])):a("",!0),s.href?(n(),o("div",Se,[r("div",fe,[c(_,{image:{src:s.href,description:s.title?.toLowerCase(),thumbnail:s.href,alt:s.title}},null,8,["image"])])])):a("",!0)]))),128))])):a("",!0),c(V,{makeSearch:e.handleSearch,paginationLinks:e.paginationLinks},null,8,["makeSearch","paginationLinks"])])}const ve=y(ne,[["render",ye]]);export{ve as default};
